(window.webpackJsonpremote=window.webpackJsonpremote||[]).push([[0],{0:function(e,t){e.exports=PropTypes},1:function(e,t){e.exports=React},128:function(e,t){e.exports=ObjectAssign},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(7),o=a.n(c),u=(a(78),a(69)),s=a(15),i=a.n(s),l=a(29),m=a(12),p=(a(80),a(81),function(e){var t=e.label,a=e.value,n=e.unit;return r.a.createElement("div",{className:"Indicator"},r.a.createElement("span",{className:"Label"},t),r.a.createElement("span",{className:"Value"},r.a.createElement("span",null,a),r.a.createElement("span",{className:"Unit"},n)))});a(82),a(83);function f(e){var t=e.children,a=e.className;return n.createElement("div",{className:"Toggle ".concat(a||"")},t)}f.Button=function(e){var t=e.id,a=e.value,r=e.children,c=e.onChange,o=e.checked;return n.createElement(n.Fragment,null,n.createElement("input",{type:"radio",value:a,checked:o||!1,onChange:function(e){e.target.checked&&c(a)},id:t,className:"Toggle-Option-Radio"}),n.createElement("label",{htmlFor:t,className:"Toggle-Option"},r))};var h=a(75),d=(a(138),function(e){var t=e.onPowerChange,a=e.onModeChange,c=e.onFanSpeedChange,o=e.onTemperatureChange,u=e.state,s=u.power,i=u.mode,l=u.fan_speed,p=u.temperature,d="heater"===i?20:22,b=Object(n.useState)(p),v=Object(m.a)(b,2),g=v[0],E=v[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{className:"Option-row"},r.a.createElement(f.Button,{id:"pwr-on",value:!0,checked:s,onChange:t},"On"),r.a.createElement(f.Button,{id:"pwr-off",value:!1,checked:!s,onChange:t},"Off")),r.a.createElement(f,{className:"Option-row"},r.a.createElement(f.Button,{id:"mode-auto",value:"auto",checked:"auto"===i,onChange:a},"Auto"),r.a.createElement(f.Button,{id:"mode-cooler",value:"cooler",checked:"cooler"===i,onChange:a},r.a.createElement("i",{className:"far fa-snowflake"})),r.a.createElement(f.Button,{id:"mode-heater",value:"heater",checked:"heater"===i,onChange:a},r.a.createElement("i",{className:"fas fa-sun"})),r.a.createElement(f.Button,{id:"mode-dry",value:"dry",checked:"dry"===i,onChange:a},"Dry"),r.a.createElement(f.Button,{id:"mode-fan",value:"fan",checked:"fan"===i,onChange:a},r.a.createElement("i",{className:"fas fa-fan small"}))),r.a.createElement(f,{className:"Option-row"},r.a.createElement(f.Button,{id:"speed-auto",value:"auto",checked:"auto"===l,onChange:c},"Auto"),r.a.createElement(f.Button,{id:"speed-high",value:"high",checked:"high"===l,onChange:c},r.a.createElement("i",{className:"fas fa-fan"})),r.a.createElement(f.Button,{id:"speed-low",value:"low",checked:"low"===l,onChange:c},r.a.createElement("i",{className:"fas fa-fan small"})),r.a.createElement(f.Button,{id:"speed-quiet",value:"quiet",checked:"quiet"===l,onChange:c},r.a.createElement("i",{className:"fas fa-volume-mute"})),r.a.createElement(f.Button,{id:"speed-natural",value:"natural",checked:"natural"===l,onChange:c},r.a.createElement("i",{className:"fas fa-tree"}))),r.a.createElement("div",{className:"Option-row Option-row_slider"},r.a.createElement(h.a,{min:d,max:30,value:g,onChange:E,onAfterChange:o,trackStyle:{backgroundColor:"transparent",height:6},railStyle:{backgroundColor:"#106d82",height:6},handleStyle:{border:"1px solid #106d82",height:20,width:20,marginLeft:0,marginTop:-7,backgroundColor:"white"}}),r.a.createElement("div",{className:"Target-temperature"},g,"\xb0C")))}),b=a(73),v=a(74),g=function(){function e(){Object(b.a)(this,e),this.url_base="/api/"}return Object(v.a)(e,[{key:"_post",value:function(e,t){var a=this.url_base+e,n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}};t&&(n.body=JSON.stringify(t)),fetch(a,n)}},{key:"off",value:function(){this._post("off")}},{key:"on",value:function(){this._post("on")}},{key:"mode",value:function(e){this._post("mode",{mode:e})}},{key:"fan",value:function(e){this._post("fan",{speed:e})}},{key:"temperature",value:function(e){this._post("temperature",{temperature:e})}},{key:"history",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url_base+"sensor");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sensor",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url_base+"sensor");case 2:return t=e.sent,e.next=5,t.json();case 5:if(0!==(a=e.sent).length){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",a[0]);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"state",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url_base+"state");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E={mode:"auto",power:!1,fan_speed:"auto",temperature:25},y=(a(139),function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(m.a)(a,2),o=c[0],u=c[1];return r.a.createElement("div",{className:"Drawer"},r.a.createElement("div",{className:"Drawer-Content "+(o?"Open":"")},t),r.a.createElement("button",{className:"Drawer-Button",onClick:function(){return u(!o)}},o?r.a.createElement("i",{className:"fa fa-chevron-up"}):r.a.createElement("i",{className:"fa fa-chevron-down"})))}),O=a(24),w=(a(140),a(13)),j=function(e){var t=e.history,a=Object(n.useRef)(null),c=Object(n.useState)(86400),o=Object(m.a)(c,2),u=o[0],s=o[1];return Object(n.useEffect)((function(){var e=(new Date).getTime()/1e3-u,n=t.filter((function(t){return t.timestamp>=e})).sort((function(e,t){return e.timestamp-t.timestamp})),r=Math.min.apply(Math,Object(O.a)(n.map((function(e){return e.temperature}))))-2,c=Math.max.apply(Math,Object(O.a)(n.map((function(e){return e.temperature}))))+2,o=Math.min.apply(Math,Object(O.a)(n.map((function(e){return e.humidity}))))-5,s=Math.max.apply(Math,Object(O.a)(n.map((function(e){return e.humidity}))))+5,i=Math.min.apply(Math,Object(O.a)(n.map((function(e){return e.timestamp})))),l=Math.max.apply(Math,Object(O.a)(n.map((function(e){return e.timestamp})))),m=20,p=100,f=100,h=100,d=600-h-p,b=400-m-f;w.g(a.current).select("*").remove();var v=w.g(a.current).attr("viewBox","0 0 ".concat(d+h+p," ").concat(b+m+f)).append("g").attr("transform","translate(".concat(h,",").concat(m,")")),g=w.e().domain([o,s]).range([b,0]),E=w.e().domain([r,c]).range([b,0]),y=w.f().domain([new Date(1e3*i),new Date(1e3*l)]).range([0,d]);v.append("g").attr("transform","translate(0,".concat(b,")")).attr("class","axis").style("text-anchor","end").call(w.a(y)).selectAll("text").attr("transform","translate(-10,10)rotate(-45)"),v.append("g").attr("class","axis").call(w.b(E).ticks(7)),v.append("g").attr("class","axis").attr("transform","translate(".concat(d,",0)")).call(w.c(g).ticks(5));var j=w.d().x((function(e){return y(new Date(1e3*e.timestamp))})).y((function(e){return E(e.temperature)}));v.append("path").datum(n).attr("class","Chart_ts-1").attr("d",j);var k=w.d().x((function(e){return y(new Date(1e3*e.timestamp))})).y((function(e){return g(e.humidity)}));v.append("path").datum(n).attr("class","Chart_ts-2").attr("d",k),v.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("font-size","30px").attr("y",40-h).attr("x",-b/2).attr("fill","red").text("Temperature"),v.append("text").attr("text-anchor","middle").attr("transform","rotate(90)").attr("font-size","30px").attr("y",-d-p+40).attr("x",b/2).attr("fill","steelblue").text("Humidity")}),[t,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{className:"Chart",ref:a}),r.a.createElement("div",{className:"Chart"},r.a.createElement("button",{onClick:function(){return s(21600)}},"6h"),r.a.createElement("button",{onClick:function(){return s(86400)}},"1d"),r.a.createElement("button",{onClick:function(){return s(172800)}},"2d"),r.a.createElement("button",{onClick:function(){return s(604800)}},"1w")))};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=new g,N=function(){var e=Object(n.useState)(E),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),u=Object(m.a)(o,2),s=u[0],f=u[1],h=Object(n.useState)(null),b=Object(m.a)(h,2),v=b[0],g=b[1],O=Object(n.useState)([]),w=Object(m.a)(O,2),k=w[0],N=w[1];return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.history();case 2:t=e.sent,N(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){x.state().then((function(e){c(e),x.sensor().then((function(e){g(e)})),f(!1)}))}),[]),s?r.a.createElement("div",null,"Please wait"):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"Indicators"},r.a.createElement(p,{label:"Temperature",value:v?v.temperature:"N/A",unit:"\xb0C"}),r.a.createElement(p,{label:"Humidity",value:v?v.humidity:"N/A",unit:"%"}))),r.a.createElement("main",{className:"App-main"},r.a.createElement(y,null,0===k.length?"Collecting data...":r.a.createElement(j,{history:k})),r.a.createElement(d,{onPowerChange:function(e){e?x.on():x.off(),c((function(t){return C({},t,{power:e})}))},onModeChange:function(e){x.mode(e),c((function(t){return C({},t,{mode:e})}))},onFanSpeedChange:function(e){x.fan(e),c((function(t){return C({},t,{fan_speed:e})}))},onTemperatureChange:function(e){x.temperature(e),c((function(t){return C({},t,{temperature:e})}))},state:a})))};o.a.render(r.a.createElement(N,null),document.getElementById("root"))},40:function(e,t){e.exports=reactLifecyclesCompat},7:function(e,t){e.exports=ReactDOM},77:function(e,t,a){e.exports=a(141)},78:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.77f85829.chunk.js.map